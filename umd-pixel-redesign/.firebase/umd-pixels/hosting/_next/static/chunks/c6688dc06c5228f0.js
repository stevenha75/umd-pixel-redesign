(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},84774,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function n({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function s({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function o({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function d({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>n,"TableRow",()=>s])},50630,93479,99682,9165,e=>{"use strict";var t=e.i(43476),a=e.i(22016),r=e.i(45678),n=e.i(18566);let i=[{href:"/admin",label:"Events"},{href:"/admin/members",label:"Members"},{href:"/admin/activities",label:"Activities"},{href:"/admin/settings",label:"Settings"}];function s({children:e}){let s=(0,n.usePathname)();return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-50",children:[(0,t.jsx)(r.default,{}),(0,t.jsxs)("div",{className:"mx-auto flex max-w-6xl gap-6 px-4 py-8",children:[(0,t.jsxs)("aside",{className:"hidden w-56 flex-shrink-0 rounded-2xl border border-zinc-200 bg-white p-4 shadow-sm md:block",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-zinc-900",children:"Admin"}),(0,t.jsx)("div",{className:"mt-4 flex flex-col gap-2 text-sm",children:i.map(e=>{let r=s===e.href;return(0,t.jsx)(a.default,{href:e.href,className:`rounded-lg px-3 py-2 font-medium ${r?"bg-black text-white":"text-zinc-800 hover:bg-zinc-100"}`,children:e.label},e.href)})})]}),(0,t.jsx)("main",{className:"flex-1",children:e})]})]})}e.s(["AdminLayout",()=>s],50630);var o=e.i(75157);function d({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,o.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>d],93479);var l=e.i(71645);function c(e){let t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>c],99682),e.i(36180);var u=e.i(98925),m=e.i(59141);async function p(){let e=await (0,u.getDoc)((0,u.doc)(m.db,"settings","global")),t=e.data()?.currentSemesterId||null,a=t?(0,u.query)((0,u.collection)(m.db,"events"),(0,u.where)("semesterId","==",t),(0,u.orderBy)("date","desc")):(0,u.query)((0,u.collection)(m.db,"events"),(0,u.orderBy)("date","desc")),r=await (0,u.getDocs)(a),n=[],i=new Map,s=new Set;r.forEach(e=>{let t=e.data(),a=t.date?.toDate?.()??(t.date instanceof Date?t.date:new Date(t.date||Date.now())),r=t.name||"Event",o=t.attendees||[];o.forEach(e=>s.add(e)),n.push({id:e.id,name:r,date:a.toISOString(),type:t.type||"GBM",pixels:t.pixels||0,attendeesCount:o.length,attendees:[]}),i.set(e.id,r)});let o=await (0,u.getDocs)((0,u.query)((0,u.collectionGroup)(m.db,"excused_absences"),(0,u.orderBy)("createdAt","desc"))),d=[],l=new Set(s);o.forEach(e=>{let t=e.data(),a=e.ref.parent.parent?.id||"";d.push({id:e.id,eventId:a,eventName:i.get(a)||"Event",userId:t.userId||"",userName:"",userEmail:"",reason:t.reason||"",status:t.status||"pending"}),t.userId&&l.add(t.userId)});let c=new Map;return await Promise.all(Array.from(l).map(async e=>{let t=await (0,u.getDoc)((0,u.doc)(m.db,"users",e));if(t.exists()){let a=t.data(),r=`${a.firstName||""} ${a.lastName||""}`.trim()||"Member",n=a.email||a.slackEmail||"";c.set(e,{name:r,email:n})}})),d.forEach(e=>{let t=c.get(e.userId);t&&(e.userName=t.name,e.userEmail=t.email)}),n.forEach(e=>{let t=r.docs.find(t=>t.id===e.id),a=t?.data();e.attendees=(a?.attendees||[]).map(e=>{let t=c.get(e);return{id:e,name:t?.name||e,email:t?.email||""}})}),{events:n,excused:d,currentSemesterId:t}}async function f(e,t){let a=e.date?new Date(e.date):new Date,r=u.Timestamp.fromDate(a),n={name:e.name,semesterId:t||"",date:r,type:e.type,pixels:Number(e.pixels)||0,attendees:[]};return{id:(await (0,u.addDoc)((0,u.collection)(m.db,"events"),n)).id,name:n.name,date:a.toISOString(),type:n.type,pixels:n.pixels,attendeesCount:0}}async function b(e,t){let a=t.date?new Date(t.date):new Date,r=u.Timestamp.fromDate(a);return await (0,u.updateDoc)((0,u.doc)(m.db,"events",e),{name:t.name,type:t.type,pixels:Number(t.pixels)||0,date:r}),{id:e,name:t.name,date:a.toISOString(),type:t.type,pixels:Number(t.pixels)||0}}async function x(e){await (0,u.deleteDoc)((0,u.doc)(m.db,"events",e))}async function y(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"events",e),{pixels:Number(t)||0})}async function h(e,t,a){await (0,u.updateDoc)((0,u.doc)(m.db,"events",e,"excused_absences",t),{status:a})}async function v(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"events",e),{attendees:(0,u.arrayUnion)(t)})}async function w(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"events",e),{attendees:(0,u.arrayRemove)(t)})}async function g(e,t,a){let r=(0,u.doc)(m.db,"events",e);if("present"===a){await (0,u.updateDoc)(r,{attendees:(0,u.arrayUnion)(t)});let e=await (0,u.getDocs)((0,u.query)((0,u.collection)(r,"excused_absences"),(0,u.where)("userId","==",t)));await Promise.all(e.docs.map(e=>(0,u.deleteDoc)(e.ref)))}else if("excused"===a){await (0,u.updateDoc)(r,{attendees:(0,u.arrayRemove)(t)});let e=await (0,u.getDocs)((0,u.query)((0,u.collection)(r,"excused_absences"),(0,u.where)("userId","==",t)));e.empty?await (0,u.addDoc)((0,u.collection)(r,"excused_absences"),{userId:t,status:"approved",reason:"Marked excused by admin",createdAt:u.Timestamp.now()}):await Promise.all(e.docs.map(e=>(0,u.updateDoc)(e.ref,{status:"approved"})))}else{await (0,u.updateDoc)(r,{attendees:(0,u.arrayRemove)(t)});let e=await (0,u.getDocs)((0,u.query)((0,u.collection)(r,"excused_absences"),(0,u.where)("userId","==",t)));await Promise.all(e.docs.map(e=>(0,u.deleteDoc)(e.ref)))}}async function D(){return(await (0,u.getDocs)((0,u.query)((0,u.collection)(m.db,"users"),(0,u.orderBy)("pixelCached","desc")))).docs.map((e,t)=>{let a=e.data();return{id:e.id,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||a.slackEmail||"",pixels:a.pixelCached??a.pixels??0,pixelDelta:a.pixelDelta??a.pixeldelta??0,rank:t+1}})}async function N(e){return{id:(await (0,u.addDoc)((0,u.collection)(m.db,"users"),{...e,isAdmin:!1,pixelDelta:0,pixelCached:0,createdAt:u.Timestamp.now()})).id,...e,pixels:0,pixelDelta:0}}async function k(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"users",e),{firstName:t.firstName,lastName:t.lastName,email:t.email})}async function j(e){await (0,u.deleteDoc)((0,u.doc)(m.db,"users",e))}async function E(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"users",e),{isAdmin:t})}async function C(e,t){let a=Array.from(new Set(t.map(e=>e.trim()).filter(Boolean))),r=[];for(let e of a)(await (0,u.getDocs)((0,u.query)((0,u.collection)(m.db,"users"),(0,u.where)("email","==",e.toLowerCase())))).forEach(e=>r.push(e.id));return r.length&&await (0,u.updateDoc)((0,u.doc)(m.db,"events",e),{attendees:(0,u.arrayUnion)(...r)}),r}async function I(e){let t=(0,u.collection)(m.db,"activities"),a=e?(0,u.query)(t,(0,u.where)("semesterId","==",e),(0,u.orderBy)("name","asc")):(0,u.query)(t,(0,u.orderBy)("name","asc"));return(await (0,u.getDocs)(a)).docs.map(e=>{let t=e.data(),a=Object.entries(t.multipliers||{}).map(([e,t])=>({userId:e,multiplier:Number(t)}));return{id:e.id,name:t.name||"Activity",type:t.type||"other",pixels:t.pixels||0,semesterId:t.semesterId,multipliers:a}})}async function R(e){return{id:(await (0,u.addDoc)((0,u.collection)(m.db,"activities"),{...e,multipliers:{},createdAt:u.Timestamp.now()})).id,...e,multipliers:[]}}async function A(e,t){await (0,u.updateDoc)((0,u.doc)(m.db,"activities",e),{name:t.name,type:t.type,pixels:t.pixels,semesterId:t.semesterId})}async function S(e){await (0,u.deleteDoc)((0,u.doc)(m.db,"activities",e))}async function P(e,t,a){await (0,u.updateDoc)((0,u.doc)(m.db,"activities",e),{[`multipliers.${t}`]:a})}async function _(e){let t=await (0,u.getDocs)((0,u.query)((0,u.collection)(m.db,"users"),(0,u.where)("email","==",e.toLowerCase())));return t.empty?null:t.docs[0].id}async function O(e){let t=Array.from(new Set(e)),a=new Map;return await Promise.all(t.map(async e=>{let t=await (0,u.getDoc)((0,u.doc)(m.db,"users",e));if(t.exists()){let r=t.data(),n=`${r.firstName||""} ${r.lastName||""}`.trim()||"Member",i=r.email||r.slackEmail||"";a.set(e,{name:n,email:i})}})),a}e.s(["addAttendee",()=>v,"addAttendeesByEmail",()=>C,"addMember",()=>N,"createActivity",()=>R,"createEvent",()=>f,"deleteActivity",()=>S,"deleteEventById",()=>x,"deleteMember",()=>j,"fetchActivities",()=>I,"fetchAdminData",()=>p,"fetchMembers",()=>D,"fetchUserDetails",()=>O,"findUserIdByEmail",()=>_,"removeAttendee",()=>w,"setActivityMultiplier",()=>P,"setAdminFlag",()=>E,"setAttendanceStatus",()=>g,"updateActivity",()=>A,"updateEvent",()=>b,"updateEventPixels",()=>y,"updateExcusedStatus",()=>h,"updateMember",()=>k],9165)},57428,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(20783),n=e.i(81140),i=e.i(69340),s=e.i(99682),o=e.i(35804),d=e.i(96626);e.i(74080);var l=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{var i,s;let o,d,l,u=(s=i=`Primitive.${n}`,(o=a.forwardRef((e,t)=>{let{children:n,...i}=e;if(a.isValidElement(n)){var s;let e,o,d=(s=n,(o=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(o=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),l=function(e,t){let a={...t};for(let r in t){let n=e[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?a[r]=(...e)=>{let t=i(...e);return n(...e),t}:n&&(a[r]=n):"style"===r?a[r]={...n,...i}:"className"===r&&(a[r]=[n,i].filter(Boolean).join(" "))}return{...e,...a}}(i,n.props);return n.type!==a.Fragment&&(l.ref=t?(0,r.composeRefs)(t,d):d),a.cloneElement(n,l)}return a.Children.count(n)>1?a.Children.only(null):null})).displayName=`${s}.SlotClone`,d=o,(l=a.forwardRef((e,r)=>{let{children:n,...i}=e,s=a.Children.toArray(n),o=s.find(c);if(o){let e=o.props.children,n=s.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(d,{...i,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,t.jsx)(d,{...i,ref:r,children:n})})).displayName=`${i}.Slot`,l),m=a.forwardRef((e,a)=>{let{asChild:r,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?u:n,{...i,ref:a})});return m.displayName=`Primitive.${n}`,{...e,[n]:m}},{}),m="Checkbox",[p,f]=function(e,r=[]){let n=[],i=()=>{let t=n.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return i.scopeName=e,[function(r,i){let s=a.createContext(i),o=n.length;n=[...n,i];let d=r=>{let{scope:n,children:i,...d}=r,l=n?.[e]?.[o]||s,c=a.useMemo(()=>d,Object.values(d));return(0,t.jsx)(l.Provider,{value:c,children:i})};return d.displayName=r+"Provider",[d,function(t,n){let d=n?.[e]?.[o]||s,l=a.useContext(d);if(l)return l;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:a,scopeName:r})=>{let n=a(e)[`__scope${r}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(i,...r)]}(m),[b,x]=p(m);function y(e){let{__scopeCheckbox:r,checked:n,children:s,defaultChecked:o,disabled:d,form:l,name:c,onCheckedChange:u,required:p,value:f="on",internal_do_not_use_render:x}=e,[y,h]=(0,i.useControllableState)({prop:n,defaultProp:o??!1,onChange:u,caller:m}),[v,w]=a.useState(null),[g,D]=a.useState(null),N=a.useRef(!1),k=!v||!!l||!!v.closest("form"),E={checked:y,disabled:d,setChecked:h,control:v,setControl:w,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:N,required:p,defaultChecked:!j(o)&&o,isFormControl:k,bubbleInput:g,setBubbleInput:D};return(0,t.jsx)(b,{scope:r,...E,children:"function"==typeof x?x(E):s})}var h="CheckboxTrigger",v=a.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:s,...o},d)=>{let{control:l,value:c,disabled:m,checked:p,required:f,setControl:b,setChecked:y,hasConsumerStoppedPropagationRef:v,isFormControl:w,bubbleInput:g}=x(h,e),D=(0,r.useComposedRefs)(d,b),N=a.useRef(p);return a.useEffect(()=>{let e=l?.form;if(e){let t=()=>y(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,y]),(0,t.jsx)(u.button,{type:"button",role:"checkbox","aria-checked":j(p)?"mixed":p,"aria-required":f,"data-state":E(p),"data-disabled":m?"":void 0,disabled:m,value:c,...o,ref:D,onKeyDown:(0,n.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.composeEventHandlers)(s,e=>{y(e=>!!j(e)||!e),g&&w&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});v.displayName=h;var w=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:d,value:l,onCheckedChange:c,form:u,...m}=e;return(0,t.jsx)(y,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:d,required:o,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(k,{__scopeCheckbox:r})]})})});w.displayName=m;var g="CheckboxIndicator",D=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:n,...i}=e,s=x(g,r);return(0,t.jsx)(d.Presence,{present:n||j(s.checked)||!0===s.checked,children:(0,t.jsx)(u.span,{"data-state":E(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});D.displayName=g;var N="CheckboxBubbleInput",k=a.forwardRef(({__scopeCheckbox:e,...n},i)=>{let{control:d,hasConsumerStoppedPropagationRef:l,checked:c,defaultChecked:m,required:p,disabled:f,name:b,value:y,form:h,bubbleInput:v,setBubbleInput:w}=x(N,e),g=(0,r.useComposedRefs)(i,w),D=(0,s.usePrevious)(c),k=(0,o.useSize)(d);a.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(D!==c&&e){let a=new Event("click",{bubbles:t});v.indeterminate=j(c),e.call(v,!j(c)&&c),v.dispatchEvent(a)}},[v,D,c,l]);let E=a.useRef(!j(c)&&c);return(0,t.jsx)(u.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??E.current,required:p,disabled:f,name:b,value:y,form:h,...n,tabIndex:-1,ref:g,style:{...n.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function j(e){return"indeterminate"===e}function E(e){return j(e)?"indeterminate":e?"checked":"unchecked"}k.displayName=N;var C=e.i(78784),I=e.i(75157);function R({className:e,...a}){return(0,t.jsx)(w,{"data-slot":"checkbox",className:(0,I.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(D,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,t.jsx)(C.CheckIcon,{className:"size-3.5"})})})}e.s(["Checkbox",()=>R],57428)},68450,e=>{"use strict";var t=e.i(43476);function a({filename:e,rows:a}){return(0,t.jsx)("button",{onClick:()=>{if(!a.length)return;let t=Object.keys(a[0]),r=new Blob([[t.join(","),...a.map(e=>t.map(t=>JSON.stringify(e[t]??"")).join(","))].join("\n")],{type:"text/csv"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=e,i.click(),URL.revokeObjectURL(n)},className:"rounded-md border border-border px-3 py-2 text-sm font-medium text-foreground hover:bg-muted disabled:opacity-50",disabled:!a.length,children:"Export CSV"})}e.s(["CsvExportButton",()=>a])}]);